<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Completa - Prisma Studio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary: #6A0DAD;
            --primary-light: #8425E3;
            --secondary: #00BFFF;
            --accent: #C7B3FF;
            --dark: #0D0D0D;
            --dark-light: #1A1A1A;
            --text: #E6E6E6;
            --success: #4CAF50;
            --warning: #FF9800;
            --error: #F44336;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            margin: 20px auto;
            padding: 30px;
            background: var(--dark-light);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .prisma-logo {
            width: 80px;
            height: 80px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .prisma-triangle {
            width: 80px;
            height: 70px;
            position: relative;
            transform: rotate(0deg);
        }

        .prisma-triangle::before {
            content: "";
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 40px 0px 40px 70px;
            border-color: transparent transparent transparent var(--primary);
            filter: drop-shadow(0 0 10px rgba(199, 179, 255, 0.3));
        }

        .prisma-triangle::after {
            content: "";
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 35px 60px 35px;
            border-color: transparent transparent transparent;
            background: linear-gradient(135deg, var(--primary-light), var(--secondary));
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            top: 5px;
            left: 5px;
        }

        .prisma-inner {
            position: absolute;
            width: 60px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-light), var(--secondary));
            clip-path: polygon(0 0, 100% 50%, 0 100%);
            top: 12px;
            left: 6px;
            z-index: 2;
        }
        
        .brand-text {
            font-size: 28px;
            font-weight: bold;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .contact {
            font-size: 18px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--accent);
            font-size: 28px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 15px 25px;
            background: #2A2A2A;
            border: none;
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab:hover {
            background: #333;
            transform: translateY(-2px);
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--accent);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #444;
            border-radius: 8px;
            background: #2A2A2A;
            color: var(--text);
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(106, 13, 173, 0.3);
        }
        
        .time-inputs {
            display: flex;
            gap: 10px;
        }
        
        .time-inputs input {
            flex: 1;
        }
        
        .price-display {
            background: #2A2A2A;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
            color: var(--accent);
        }
        
        .price-display span {
            color: var(--text);
            font-weight: 600;
        }
        
        .slider-container {
            margin-top: 10px;
        }
        
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #444;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }
        
        .slider-value {
            text-align: right;
            margin-top: 5px;
            font-weight: 600;
            color: var(--accent);
        }
        
        .color-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .color-option {
            padding: 10px 15px;
            background: #2A2A2A;
            border: 2px solid #444;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            flex: 1;
            min-width: 80px;
        }
        
        .color-option:hover {
            transform: translateY(-2px);
        }
        
        .color-option.selected {
            border-color: var(--secondary);
            background: var(--primary-light);
        }
        
        .color-palette {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .color-palette-option {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .color-palette-option:hover {
            transform: scale(1.1);
        }
        
        .color-palette-option.selected {
            border-color: var(--secondary);
            transform: scale(1.1);
        }
        
        .energy-flags {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .energy-flag {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .energy-flag:hover {
            transform: translateY(-2px);
        }
        
        .energy-flag.selected {
            border-color: white;
        }
        
        .flag-green {
            background-color: #4CAF50;
            color: white;
        }
        
        .flag-yellow {
            background-color: #FFC107;
            color: black;
        }
        
        .flag-red1 {
            background-color: #F44336;
            color: white;
        }
        
        .flag-red2 {
            background-color: #B71C1C;
            color: white;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 14px 30px;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 13, 173, 0.4);
        }
        
        .btn-secondary {
            background: #444;
            color: var(--text);
        }
        
        .btn-secondary:hover {
            background: #555;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background-color: var(--dark-light);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            color: var(--text);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            max-width: 500px;
            width: 90%;
            animation: slideUp 0.3s;
            position: relative;
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-content::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 15px 15px 0 0;
        }
        
        .close {
            color: var(--accent);
            font-size: 24px;
            cursor: pointer;
            position: absolute;
            top: 15px;
            right: 20px;
            transition: color 0.3s;
        }
        
        .close:hover {
            color: var(--secondary);
        }
        
        .result-title {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--accent);
        }
        
        .result-details {
            text-align: left;
            margin: 20px 0;
            padding: 20px;
            background: #2A2A2A;
            border-radius: 8px;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #444;
        }
        
        .result-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .result-total {
            font-size: 20px;
            font-weight: bold;
            color: var(--accent);
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid var(--primary);
        }
        
        .client-info {
            background: #2A2A2A;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .client-info h3 {
            margin-bottom: 15px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .client-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .legal-notice {
            background: #2A2A2A;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid var(--warning);
        }
        
        .legal-notice h3 {
            color: var(--warning);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .notice-content {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .notice-content ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #777;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .client-info-grid {
                grid-template-columns: 1fr;
            }
            
            .color-options {
                flex-direction: column;
            }
            
            .energy-flags {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="brand">
                <div class="prisma-logo">
                    <div class="prisma-triangle">
                        <div class="prisma-inner"></div>
                    </div>
                </div>
                <div class="brand-text">Prisma Studio</div>
            </div>
            <div class="contact">
                <i class="fas fa-phone-alt"></i>
                (31) 9 8339-9262
            </div>
        </div>
        
        <h1>Calculadora Completa de Serviços</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="openTab('impressao3d')">
                <i class="fas fa-print"></i> Impressão 3D
            </button>
            <button class="tab" onclick="openTab('canecas')">
                <i class="fas fa-mug-hot"></i> Canecas
            </button>
            <button class="tab" onclick="openTab('camisas')">
                <i class="fas fa-tshirt"></i> Camisas
            </button>
        </div>
        
        <div class="client-info">
            <h3><i class="fas fa-user"></i> Informações do Cliente e Pedido</h3>
            <div class="client-info-grid">
                <div class="input-group">
                    <label for="nomeCliente">Nome do Cliente</label>
                    <input type="text" id="nomeCliente" placeholder="Nome completo do cliente">
                </div>
                <div class="input-group">
                    <label for="produto">Descrição do Pedido</label>
                    <input type="text" id="produto" placeholder="Descrição do produto personalizado">
                </div>
                <div class="input-group">
                    <label for="dataPedido">Data do Pedido</label>
                    <input type="date" id="dataPedido">
                </div>
                <div class="input-group">
                    <label for="observacoes">Observações</label>
                    <textarea id="observacoes" placeholder="Detalhes adicionais sobre o pedido" rows="2"></textarea>
                </div>
            </div>
        </div>

        <!-- ABA IMPRESSÃO 3D -->
        <div id="impressao3d" class="tab-content active">
            <div class="calculator-grid">
                <div class="input-section">
                    <div class="input-group">
                        <label for="tempoHoras">Tempo de Impressão</label>
                        <div class="time-inputs">
                            <input type="number" id="tempoHoras" placeholder="Horas" min="0" value="0">
                            <input type="number" id="tempoMinutos" placeholder="Minutos" min="0" max="59" value="0">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="filamento">Quantidade de Filamento (g)</label>
                        <input type="number" id="filamento" placeholder="Digite os gramas" min="0" step="0.1">
                    </div>
                    
                    <div class="input-group">
                        <label>Cor do Filamento</label>
                        <select id="corFilamento" style="margin-bottom: 10px;">
                            <option value="padrao">Padrão (Branco, Preto, Cinza)</option>
                            <option value="cores-basicas">Cores Básicas (Azul, Vermelho, Verde)</option>
                            <option value="cores-especiais">Cores Especiais (Metalizado, Transparente)</option>
                            <option value="cores-premium">Cores Premium (Glow, Madeira, Flexível)</option>
                        </select>
                        
                        <div class="color-palette">
                            <div class="color-palette-option selected" style="background-color: #FFFFFF;" data-color="branco" title="Branco"></div>
                            <div class="color-palette-option" style="background-color: #000000;" data-color="preto" title="Preto"></div>
                            <div class="color-palette-option" style="background-color: #808080;" data-color="cinza" title="Cinza"></div>
                            <div class="color-palette-option" style="background-color: #FF0000;" data-color="vermelho" title="Vermelho"></div>
                            <div class="color-palette-option" style="background-color: #0000FF;" data-color="azul" title="Azul"></div>
                        </div>
                    </div>
                </div>
                
                <div class="input-section">
                    <div class="input-group">
                        <label for="precoFilamento">Preço do Filamento (por kg)</label>
                        <input type="number" id="precoFilamento" placeholder="Preço por kg" min="0" step="0.01" value="94.90">
                        <div class="price-display">
                            Preço atual: R$ <span id="precoAtual">94.90</span> por kg
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Bandeira Tarifária (CEMIG)</label>
                        <div class="energy-flags">
                            <div class="energy-flag flag-green selected" data-flag="verde">
                                Verde
                            </div>
                            <div class="energy-flag flag-yellow" data-flag="amarela">
                                Amarela
                            </div>
                            <div class="energy-flag flag-red1" data-flag="vermelha1">
                                Vermelha 1
                            </div>
                            <div class="energy-flag flag-red2" data-flag="vermelha2">
                                Vermelha 2
                            </div>
                        </div>
                        <div class="price-display" style="margin-top: 10px;">
                            Acréscimo: R$ <span id="acrescimoBandeira">0.00</span> por kWh
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="complexidade">Complexidade da Peça</label>
                        <select id="complexidade">
                            <option value="1.0">Baixa (Impressão simples)</option>
                            <option value="1.2" selected>Média (Suportes moderados)</option>
                            <option value="1.5">Alta (Muitos suportes, detalhes finos)</option>
                            <option value="2.0">Muito Alta (Peças complexas, alta chance de falha)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="lucro3d">Margem de Lucro: <span id="lucro3dValue">100</span>%</label>
                        <div class="slider-container">
                            <input type="range" id="lucro3d" class="slider" min="0" max="300" value="100">
                        </div>
                        <div class="slider-value" id="lucro3dDisplay">100%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA CANECAS -->
        <div id="canecas" class="tab-content">
            <div class="calculator-grid">
                <div class="input-section">
                    <div class="input-group">
                        <label for="tipoCaneca">Tipo de Caneca</label>
                        <select id="tipoCaneca">
                            <option value="ceramica-basica">Cerâmica Básica (325ml)</option>
                            <option value="ceramica-premium">Cerâmica Premium (400ml)</option>
                            <option value="magica">Caneca Mágica (300ml)</option>
                            <option value="plastico">Plástico (350ml)</option>
                            <option value="personalizada">Personalizada (outro)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="custoCaneca">Custo da Caneca (unidade)</label>
                        <input type="number" id="custoCaneca" placeholder="Custo por caneca" min="0" step="0.01" value="8.00">
                        <div class="price-display">
                            Custo atual: R$ <span id="custoCanecaAtual">8.00</span> por unidade
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="quantidadeCanecas">Quantidade</label>
                        <input type="number" id="quantidadeCanecas" placeholder="Quantidade de canecas" min="1" value="1">
                    </div>
                </div>
                
                <div class="input-section">
                    <div class="input-group">
                        <label>Tamanho da Estampa</label>
                        <div class="color-options">
                            <div class="color-option selected" data-value="pequena">Pequena</div>
                            <div class="color-option" data-value="media">Média</div>
                            <div class="color-option" data-value="grande">Grande</div>
                            <div class="color-option" data-value="full">Full Caneca</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Cores da Estampa</label>
                        <div class="color-options">
                            <div class="color-option selected" data-value="1">1 Cor</div>
                            <div class="color-option" data-value="2-3">2-3 Cores</div>
                            <div class="color-option" data-value="multicolor">Multicolor</div>
                            <div class="color-option" data-value="fullcolor">Full Color</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="complexidadeCaneca">Complexidade do Design</label>
                        <select id="complexidadeCaneca">
                            <option value="1.0">Simples (Texto/Logo)</option>
                            <option value="1.3" selected>Média (Ilustração simples)</option>
                            <option value="1.7">Complexa (Arte detalhada)</option>
                            <option value="2.0">Muito Complexa (Foto/Arte digital)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="lucroCanecas">Margem de Lucro: <span id="lucroCanecasValue">100</span>%</label>
                        <div class="slider-container">
                            <input type="range" id="lucroCanecas" class="slider" min="0" max="300" value="100">
                        </div>
                        <div class="slider-value" id="lucroCanecasDisplay">100%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA CAMISAS -->
        <div id="camisas" class="tab-content">
            <div class="calculator-grid">
                <div class="input-section">
                    <div class="input-group">
                        <label for="tipoCamisa">Tipo de Camisa</label>
                        <select id="tipoCamisa">
                            <option value="algodao-basica">Algodão Básica</option>
                            <option value="algodao-premium">Algodão Premium</option>
                            <option value="dry-fit">Dry Fit</option>
                            <option value="polo">Camisa Polo</option>
                            <option value="moletom">Moletom</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="custoCamisa">Custo da Camisa (unidade)</label>
                        <input type="number" id="custoCamisa" placeholder="Custo por camisa" min="0" step="0.01" value="15.00">
                        <div class="price-display">
                            Custo atual: R$ <span id="custoCamisaAtual">15.00</span> por unidade
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="quantidadeCamisas">Quantidade</label>
                        <input type="number" id="quantidadeCamisas" placeholder="Quantidade de camisas" min="1" value="1">
                    </div>
                </div>
                
                <div class="input-section">
                    <div class="input-group">
                        <label>Tamanho da Estampa</label>
                        <div class="color-options">
                            <div class="color-option selected" data-value="pequena">Pequena</div>
                            <div class="color-option" data-value="media">Média</div>
                            <div class="color-option" data-value="grande">Grande</div>
                            <div class="color-option" data-value="full">Full Frente</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Técnica de Estampa</label>
                        <div class="color-options">
                            <div class="color-option selected" data-value="transfer">Transfer</div>
                            <div class="color-option" data-value="serigrafia">Serigrafia</div>
                            <div class="color-option" data-value="dtf">DTF</div>
                            <div class="color-option" data-value="sublimacao">Sublimação</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Localização da Estampa</label>
                        <div class="color-options">
                            <div class="color-option selected" data-value="frente">Frente</div>
                            <div class="color-option" data-value="costas">Costas</div>
                            <div class="color-option" data-value="frente-costas">Frente + Costas</div>
                            <div class="color-option" data-value="manga">Manga</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="lucroCamisas">Margem de Lucro: <span id="lucroCamisasValue">100</span>%</label>
                        <div class="slider-container">
                            <input type="range" id="lucroCamisas" class="slider" min="0" max="300" value="100">
                        </div>
                        <div class="slider-value" id="lucroCamisasDisplay">100%</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="buttons">
            <button class="btn-primary" onclick="calcularCusto()">
                <i class="fas fa-calculator"></i> Calcular Custo
            </button>
            <button class="btn-success" onclick="gerarRecibo()" id="btnPDF" disabled>
                <i class="fas fa-file-pdf"></i> Gerar Recibo PDF
            </button>
            <button class="btn-secondary" onclick="limparCampos()">
                <i class="fas fa-redo"></i> Limpar Campos
            </button>
        </div>

        <div class="legal-notice">
            <h3><i class="fas fa-info-circle"></i> Informações Legais Importantes</h3>
            <div class="notice-content">
                <p><strong>Este documento é um RECIBO SIMPLES, não uma nota fiscal.</strong></p>
                <p>Como pessoa física realizando vendas eventuais, você pode utilizar recibo simples para comprovar a transação.</p>
                <p><strong>Recomendações:</strong></p>
                <ul>
                    <li>Mantenha cópia de todos os recibos emitidos</li>
                    <li>Registre todas as vendas em um controle simples</li>
                    <li>Para clientes PJ, verifique a necessidade de emissão de nota fiscal</li>
                </ul>
                <p><em>Em caso de dúvidas sobre obrigações fiscais, consulte um contador.</em></p>
            </div>
        </div>
        
        <div class="footer">
            <p>Prisma Studio &copy; 2023 - Calculadora Completa de Serviços</p>
        </div>
    </div>

    <div id="resultadoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="fecharModal()">&times;</span>
            <h2 class="result-title">Resultado do Cálculo</h2>
            <div id="resultado"></div>
            <div class="buttons" style="margin-top: 20px;">
                <button class="btn-success" onclick="gerarRecibo()">
                    <i class="fas fa-file-pdf"></i> Gerar Recibo PDF
                </button>
                <button class="btn-primary" onclick="fecharModal()">
                    <i class="fas fa-check"></i> Fechar
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========== CONFIGURAÇÕES GERAIS ==========
        const bandeiras = {
            "verde": 0.00,
            "amarela": 0.01885,
            "vermelha1": 0.04463,
            "vermelha2": 0.07877
        };
        
        const precosFilamento = {
            "padrao": 94.90,
            "cores-basicas": 99.90,
            "cores-especiais": 119.90,
            "cores-premium": 149.90
        };
        
        const precosCanecas = {
            "ceramica-basica": 8.00,
            "ceramica-premium": 12.00,
            "magica": 15.00,
            "plastico": 6.00,
            "personalizada": 10.00
        };
        
        const precosCamisas = {
            "algodao-basica": 15.00,
            "algodao-premium": 25.00,
            "dry-fit": 30.00,
            "polo": 35.00,
            "moletom": 45.00
        };
        
        const precosEstampaCaneca = {
            "pequena": 5.00,
            "media": 8.00,
            "grande": 12.00,
            "full": 18.00
        };
        
        const multiplicadorCoresCaneca = {
            "1": 1.0,
            "2-3": 1.3,
            "multicolor": 1.7,
            "fullcolor": 2.0
        };
        
        const precosEstampaCamisa = {
            "pequena": 8.00,
            "media": 12.00,
            "grande": 18.00,
            "full": 25.00
        };
        
        const multiplicadorTecnica = {
            "transfer": 1.0,
            "serigrafia": 1.2,
            "dtf": 1.5,
            "sublimacao": 1.8
        };
        
        const multiplicadorLocalizacao = {
            "frente": 1.0,
            "costas": 1.0,
            "frente-costas": 1.8,
            "manga": 0.5
        };
        
        // Variáveis globais
        let precoFinal = 0;
        let dadosCalculo = {};
        let abaAtual = 'impressao3d';
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            const hoje = new Date().toISOString().split('T')[0];
            document.getElementById('dataPedido').value = hoje;
            
            // Configurar eventos dos sliders
            document.getElementById('lucro3d').addEventListener('input', function() {
                document.getElementById('lucro3dValue').textContent = this.value;
                document.getElementById('lucro3dDisplay').textContent = this.value + '%';
            });
            
            document.getElementById('lucroCanecas').addEventListener('input', function() {
                document.getElementById('lucroCanecasValue').textContent = this.value;
                document.getElementById('lucroCanecasDisplay').textContent = this.value + '%';
            });
            
            document.getElementById('lucroCamisas').addEventListener('input', function() {
                document.getElementById('lucroCamisasValue').textContent = this.value;
                document.getElementById('lucroCamisasDisplay').textContent = this.value + '%';
            });
            
            // Configurar seleções
            configurarSelecoes();
            
            // Configurar eventos de mudança
            document.getElementById('corFilamento').addEventListener('change', function() {
                const precoFilamento = document.getElementById('precoFilamento');
                const precoAtual = document.getElementById('precoAtual');
                precoFilamento.value = precosFilamento[this.value];
                precoAtual.textContent = precoFilamento.value;
            });
            
            document.getElementById('tipoCaneca').addEventListener('change', function() {
                const custo = precosCanecas[this.value];
                document.getElementById('custoCaneca').value = custo;
                document.getElementById('custoCanecaAtual').textContent = custo;
            });
            
            document.getElementById('tipoCamisa').addEventListener('change', function() {
                const custo = precosCamisas[this.value];
                document.getElementById('custoCamisa').value = custo;
                document.getElementById('custoCamisaAtual').textContent = custo;
            });
        });
        
        function configurarSelecoes() {
            // Configurar opções de seleção
            const todasOpcoes = document.querySelectorAll('.color-option, .color-palette-option, .energy-flag');
            todasOpcoes.forEach(opcao => {
                opcao.addEventListener('click', function() {
                    const grupo = this.parentElement;
                    if (grupo.classList.contains('color-options') || grupo.classList.contains('energy-flags') || grupo.classList.contains('color-palette')) {
                        grupo.querySelectorAll('.color-option, .color-palette-option, .energy-flag').forEach(o => o.classList.remove('selected'));
                    }
                    this.classList.add('selected');
                    
                    // Atualizar bandeira tarifária
                    if (this.classList.contains('energy-flag')) {
                        atualizarAcrescimoBandeira();
                    }
                });
            });
        }
        
        function atualizarAcrescimoBandeira() {
            const bandeiraSelecionada = document.querySelector('.energy-flag.selected').getAttribute('data-flag');
            const acrescimo = bandeiras[bandeiraSelecionada];
            document.getElementById('acrescimoBandeira').textContent = acrescimo.toFixed(5);
        }
        
        function openTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            abaAtual = tabName;
        }
        
        function calcularCusto() {
            switch(abaAtual) {
                case 'impressao3d':
                    calcularImpressao3D();
                    break;
                case 'canecas':
                    calcularCanecas();
                    break;
                case 'camisas':
                    calcularCamisas();
                    break;
            }
        }
        
        // ========== IMPRESSÃO 3D ==========
        function calcularImpressao3D() {
            let tempoHoras = parseFloat(document.getElementById('tempoHoras').value) || 0;
            let tempoMinutos = parseFloat(document.getElementById('tempoMinutos').value) || 0;
            let filamento = parseFloat(document.getElementById('filamento').value) || 0;
            let margemLucro = parseFloat(document.getElementById('lucro3d').value) || 100;
            let precoFilamentoKg = parseFloat(document.getElementById('precoFilamento').value) || 94.90;
            let complexidade = parseFloat(document.getElementById('complexidade').value) || 1.2;
            
            const bandeiraSelecionada = document.querySelector('.energy-flag.selected').getAttribute('data-flag');
            const acrescimoBandeira = bandeiras[bandeiraSelecionada];
            const corSelecionada = document.querySelector('.color-palette-option.selected').getAttribute('data-color');
            
            let tempoTotal = tempoHoras + (tempoMinutos / 60);
            
            if (tempoTotal <= 0 && filamento <= 0) {
                alert("Por favor, informe pelo menos o tempo de impressão ou a quantidade de filamento.");
                return;
            }
            
            let precoKWhBase = 0.70;
            let precoKWh = precoKWhBase + acrescimoBandeira;
            let potencia = 0.1;
            
            let custoEnergia = precoKWh * potencia * tempoTotal;
            let custoFilamento = (precoFilamentoKg / 1000) * filamento;
            let custoOperacional = (custoEnergia + custoFilamento) * 0.1;
            let custoTotal = custoEnergia + custoFilamento + custoOperacional;
            
            custoTotal *= complexidade;
            precoFinal = custoTotal * (1 + margemLucro / 100);
            
            dadosCalculo = {
                tipo: 'Impressão 3D',
                produto: 'Peça impressa em 3D',
                custoEnergia: custoEnergia,
                custoFilamento: custoFilamento,
                custoOperacional: custoOperacional,
                custoTotal: custoTotal,
                precoFinal: precoFinal,
                margemLucro: margemLucro,
                detalhes: {
                    tempoHoras: tempoHoras,
                    tempoMinutos: tempoMinutos,
                    filamento: filamento,
                    corFilamento: corSelecionada,
                    complexidade: complexidade,
                    bandeiraTarifaria: bandeiraSelecionada
                }
            };
            
            document.getElementById('btnPDF').disabled = false;
            mostrarResultados();
        }
        
        // ========== CANECAS ==========
        function calcularCanecas() {
            const tipoCaneca = document.getElementById('tipoCaneca').value;
            const custoCaneca = parseFloat(document.getElementById('custoCaneca').value) || 0;
            const quantidade = parseInt(document.getElementById('quantidadeCanecas').value) || 1;
            const complexidade = parseFloat(document.getElementById('complexidadeCaneca').value) || 1.3;
            const margemLucro = parseFloat(document.getElementById('lucroCanecas').value) || 100;
            
            const opcoes = document.querySelectorAll('#canecas .color-option[data-value].selected');
            const tamanhoEstampa = opcoes[0].getAttribute('data-value');
            const coresEstampa = opcoes[1].getAttribute('data-value');
            
            const custoBaseCaneca = custoCaneca;
            const custoEstampaBase = precosEstampaCaneca[tamanhoEstampa] || 8.00;
            const multiplicadorCores = multiplicadorCoresCaneca[coresEstampa] || 1.0;
            const custoEstampa = custoEstampaBase * multiplicadorCores * complexidade;
            const custoUnitario = custoBaseCaneca + custoEstampa;
            const custoTotal = custoUnitario * quantidade;
            const custoSetup = quantidade > 1 ? 0 : 15.00;
            
            const custoFinal = custoTotal + custoSetup;
            precoFinal = custoFinal * (1 + margemLucro / 100);
            
            dadosCalculo = {
                tipo: 'Caneca Personalizada',
                produto: tipoCaneca,
                custoBase: custoBaseCaneca,
                custoEstampa: custoEstampa,
                custoUnitario: custoUnitario,
                quantidade: quantidade,
                custoSetup: custoSetup,
                custoTotal: custoFinal,
                precoFinal: precoFinal,
                margemLucro: margemLucro,
                detalhes: {
                    tamanhoEstampa: tamanhoEstampa,
                    coresEstampa: coresEstampa,
                    complexidade: complexidade
                }
            };
            
            document.getElementById('btnPDF').disabled = false;
            mostrarResultados();
        }
        
        // ========== CAMISAS ==========
        function calcularCamisas() {
            const tipoCamisa = document.getElementById('tipoCamisa').value;
            const custoCamisa = parseFloat(document.getElementById('custoCamisa').value) || 0;
            const quantidade = parseInt(document.getElementById('quantidadeCamisas').value) || 1;
            const margemLucro = parseFloat(document.getElementById('lucroCamisas').value) || 100;
            
            const opcoes = document.querySelectorAll('#camisas .color-option[data-value].selected');
            const tamanhoEstampa = opcoes[0].getAttribute('data-value');
            const tecnica = opcoes[1].getAttribute('data-value');
            const localizacao = opcoes[2].getAttribute('data-value');
            
            const custoBaseCamisa = custoCamisa;
            const custoEstampaBase = precosEstampaCamisa[tamanhoEstampa] || 12.00;
            const multiplicadorTec = multiplicadorTecnica[tecnica] || 1.0;
            const multiplicadorLoc = multiplicadorLocalizacao[localizacao] || 1.0;
            const custoEstampa = custoEstampaBase * multiplicadorTec * multiplicadorLoc;
            const custoUnitario = custoBaseCamisa + custoEstampa;
            const custoTotal = custoUnitario * quantidade;
            const custoSetup = quantidade > 5 ? 0 : 25.00;
            
            const custoFinal = custoTotal + custoSetup;
            precoFinal = custoFinal * (1 + margemLucro / 100);
            
            dadosCalculo = {
                tipo: 'Camisa Personalizada',
                produto: tipoCamisa,
                custoBase: custoBaseCamisa,
                custoEstampa: custoEstampa,
                custoUnitario: custoUnitario,
                quantidade: quantidade,
                custoSetup: custoSetup,
                custoTotal: custoFinal,
                precoFinal: precoFinal,
                margemLucro: margemLucro,
                detalhes: {
                    tamanhoEstampa: tamanhoEstampa,
                    tecnica: tecnica,
                    localizacao: localizacao
                }
            };
            
            document.getElementById('btnPDF').disabled = false;
            mostrarResultados();
        }
        
        function mostrarResultados() {
            let html = `
                <div class="result-details">
                    <div class="result-item">
                        <span>Tipo de Serviço:</span>
                        <span>${dadosCalculo.tipo}</span>
                    </div>`;
            
            // Detalhes específicos por tipo
            if (dadosCalculo.tipo === 'Impressão 3D') {
                html += `
                    <div class="result-item">
                        <span>Tempo de Impressão:</span>
                        <span>${dadosCalculo.detalhes.tempoHoras}h ${dadosCalculo.detalhes.tempoMinutos}min</span>
                    </div>
                    <div class="result-item">
                        <span>Filamento Utilizado:</span>
                        <span>${dadosCalculo.detalhes.filamento.toFixed(2)}g</span>
                    </div>
                    <div class="result-item">
                        <span>Cor do Filamento:</span>
                        <span>${dadosCalculo.detalhes.corFilamento.charAt(0).toUpperCase() + dadosCalculo.detalhes.corFilamento.slice(1)}</span>
                    </div>
                    <div class="result-item">
                        <span>Custo de Energia:</span>
                        <span>R$ ${dadosCalculo.custoEnergia.toFixed(2)}</span>
                    </div>
                    <div class="result-item">
                        <span>Custo do Filamento:</span>
                        <span>R$ ${dadosCalculo.custoFilamento.toFixed(2)}</span>
                    </div>
                    <div class="result-item">
                        <span>Custo Operacional:</span>
                        <span>R$ ${dadosCalculo.custoOperacional.toFixed(2)}</span>
                    </div>`;
            } else {
                html += `
                    <div class="result-item">
                        <span>Modelo:</span>
                        <span>${dadosCalculo.produto}</span>
                    </div>
                    <div class="result-item">
                        <span>Quantidade:</span>
                        <span>${dadosCalculo.quantidade} unidade(s)</span>
                    </div>
                    <div class="result-item">
                        <span>Custo do Produto:</span>
                        <span>R$ ${dadosCalculo.custoBase.toFixed(2)}</span>
                    </div>
                    <div class="result-item">
                        <span>Custo da Estampa:</span>
                        <span>R$ ${dadosCalculo.custoEstampa.toFixed(2)}</span>
                    </div>
                    <div class="result-item">
                        <span>Custo Unitário:</span>
                        <span>R$ ${dadosCalculo.custoUnitario.toFixed(2)}</span>
                    </div>
                    <div class="result-item">
                        <span>Custo de Setup:</span>
                        <span>R$ ${dadosCalculo.custoSetup.toFixed(2)}</span>
                    </div>`;
                
                if (dadosCalculo.tipo === 'Caneca Personalizada') {
                    html += `
                        <div class="result-item">
                            <span>Tamanho da Estampa:</span>
                            <span>${dadosCalculo.detalhes.tamanhoEstampa.charAt(0).toUpperCase() + dadosCalculo.detalhes.tamanhoEstampa.slice(1)}</span>
                        </div>
                        <div class="result-item">
                            <span>Cores:</span>
                            <span>${dadosCalculo.detalhes.coresEstampa}</span>
                        </div>`;
                } else {
                    html += `
                        <div class="result-item">
                            <span>Técnica:</span>
                            <span>${dadosCalculo.detalhes.tecnica.charAt(0).toUpperCase() + dadosCalculo.detalhes.tecnica.slice(1)}</span>
                        </div>
                        <div class="result-item">
                            <span>Localização:</span>
                            <span>${dadosCalculo.detalhes.localizacao.charAt(0).toUpperCase() + dadosCalculo.detalhes.localizacao.slice(1)}</span>
                        </div>`;
                }
            }
            
            html += `
                    <div class="result-item">
                        <span>Custo Total (sem lucro):</span>
                        <span>R$ ${dadosCalculo.custoTotal.toFixed(2)}</span>
                    </div>
                </div>
                <div class="result-total">
                    <span>Preço Final (com ${dadosCalculo.margemLucro}% de lucro):</span>
                    <span>R$ ${dadosCalculo.precoFinal.toFixed(2)}</span>
                </div>`;
            
            document.getElementById('resultado').innerHTML = html;
            document.getElementById('resultadoModal').style.display = 'flex';
        }

        function fecharModal() {
            document.getElementById('resultadoModal').style.display = 'none';
        }
        
        function limparCampos() {
            document.getElementById('nomeCliente').value = '';
            document.getElementById('produto').value = '';
            document.getElementById('observacoes').value = '';
            document.getElementById('btnPDF').disabled = true;
        }
        
        function gerarRecibo() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const nomeCliente = document.getElementById('nomeCliente').value || "Cliente não informado";
            const produto = document.getElementById('produto').value || "Produto personalizado";
            const dataPedido = document.getElementById('dataPedido').value || new Date().toISOString().split('T')[0];
            const observacoes = document.getElementById('observacoes').value || "Nenhuma observação adicional";
            
            const dataFormatada = new Date(dataPedido).toLocaleDateString('pt-BR');
            const corPrimaria = [106, 13, 173];
            const corSecundaria = [0, 191, 255];
            
            // Cabeçalho
            doc.setFillColor(...corPrimaria);
            doc.rect(0, 0, 210, 30, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(22);
            doc.setFont('helvetica', 'bold');
            doc.text('PRISMA STUDIO', 105, 17, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont('helvetica', 'normal');
            doc.text('Serviços Personalizados - Recibo de Venda', 105, 24, { align: 'center' });
            
            // Título do recibo
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(16);
            doc.setFont('helvetica', 'bold');
            doc.text('RECIBO DE VENDA', 105, 45, { align: 'center' });
            
            // Informações do cliente
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('Dados do Cliente:', 20, 60);
            
            doc.setFont('helvetica', 'normal');
            doc.text(`Nome: ${nomeCliente}`, 20, 68);
            doc.text(`Produto: ${produto}`, 20, 76);
            doc.text(`Data: ${dataFormatada}`, 20, 84);
            
            // Detalhes do serviço
            doc.setFont('helvetica', 'bold');
            doc.text('Detalhes do Serviço:', 20, 100);
            
            doc.setFont('helvetica', 'normal');
            doc.text(`• ${dadosCalculo.tipo}`, 20, 108);
            
            if (dadosCalculo.tipo === 'Impressão 3D') {
                doc.text(`• Tempo: ${dadosCalculo.detalhes.tempoHoras}h ${dadosCalculo.detalhes.tempoMinutos}min`, 20, 116);
                doc.text(`• Filamento: ${dadosCalculo.detalhes.filamento.toFixed(2)}g - ${dadosCalculo.detalhes.corFilamento}`, 20, 124);
            } else {
                doc.text(`• Quantidade: ${dadosCalculo.quantidade} unidade(s)`, 20, 116);
                doc.text(`• ${dadosCalculo.produto}`, 20, 124);
            }
            
            // Observações
            let observacoesLines = [];
            if (observacoes && observacoes !== "Nenhuma observação adicional") {
                doc.setFont('helvetica', 'bold');
                doc.text('Observações:', 20, 140);
                
                observacoesLines = doc.splitTextToSize(observacoes, 170);
                doc.setFont('helvetica', 'normal');
                doc.text(observacoesLines, 20, 148);
            }
            
            // Preço final
            const yPos = (observacoes && observacoes !== "Nenhuma observação adicional") ? 148 + (observacoesLines.length * 6) + 15 : 140;
            
            doc.setFillColor(...corSecundaria);
            doc.rect(15, yPos, 180, 25, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(16);
            doc.setFont('helvetica', 'bold');
            doc.text('VALOR TOTAL', 105, yPos + 10, { align: 'center' });
            
            doc.setFontSize(20);
            doc.text(`R$ ${dadosCalculo.precoFinal.toFixed(2)}`, 105, yPos + 20, { align: 'center' });
            
            // Assinatura
            const assinaturaY = yPos + 50;
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(10);
            doc.text('_________________________________________', 105, assinaturaY, { align: 'center' });
            doc.text('Assinatura do Prestador de Serviço', 105, assinaturaY + 8, { align: 'center' });
            
            // Rodapé
            const rodapeY = 270;
            doc.setTextColor(100, 100, 100);
            doc.setFontSize(8);
            doc.text('Prisma Studio - (31) 9 8339-9262', 105, rodapeY, { align: 'center' });
            doc.text('Pessoa Física - Venda Ocasional - Recibo Simples', 105, rodapeY + 5, { align: 'center' });
            doc.text('Documento válido para comprovação de transação entre particulares', 105, rodapeY + 10, { align: 'center' });
            
            // Salvar o PDF
            const nomeArquivo = `Recibo_${produto.replace(/\s+/g, '_')}_${dataFormatada.replace(/\//g, '-')}.pdf`;
            doc.save(nomeArquivo);
        }
    </script>
</body>
</html>
